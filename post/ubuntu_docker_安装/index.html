<!doctype html>
<html lang="en-us">
  <head>
    <title>Ubuntu docker 安装 // 洛七的摸鱼池塘</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="洛七" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.0fb49e70a30412f97ddfc418e18fefef1d9fcdebe45f634dbbba768b00fe1eec.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ubuntu docker 安装"/>
<meta name="twitter:description" content="实验室最近技术调研需要用到 Docker , 因此这里记录一下安装 docker 的流程
内容全部来源于docker 从入门到实践
安装 # 卸载旧版本 sudo apt-get remove docker docker-engine docker.io # 使用 APT 安装 sudo apt-get update sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release 添加软件源的 GPG 密钥
# 为了确认所下载软件包的合法性，需要添加软件源的 GPG 密钥。 # 这里使用国内源 curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # 官方源 # curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg 添加 docker 软件源
# 向 sources.list 中添加 Docker 软件源 echo &#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring."/>

    <meta property="og:title" content="Ubuntu docker 安装" />
<meta property="og:description" content="实验室最近技术调研需要用到 Docker , 因此这里记录一下安装 docker 的流程
内容全部来源于docker 从入门到实践
安装 # 卸载旧版本 sudo apt-get remove docker docker-engine docker.io # 使用 APT 安装 sudo apt-get update sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release 添加软件源的 GPG 密钥
# 为了确认所下载软件包的合法性，需要添加软件源的 GPG 密钥。 # 这里使用国内源 curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # 官方源 # curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg 添加 docker 软件源
# 向 sources.list 中添加 Docker 软件源 echo &#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Lu0key.github.io/post/ubuntu_docker_%E5%AE%89%E8%A3%85/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-01-23T21:57:17&#43;08:00" />
<meta property="article:modified_time" content="2024-01-23T21:57:17&#43;08:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://Lu0key.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="洛七" /></a>
      <span class="app-header-title">洛七的摸鱼池塘</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/tags/">Tags</a>
      </nav>
      <p>即将没书读的咸鱼</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Ubuntu docker 安装</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jan 23, 2024
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://Lu0key.github.io/tags/linux/">Linux</a>
              <a class="tag" href="https://Lu0key.github.io/tags/docker/">docker</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>实验室最近技术调研需要用到 Docker , 因此这里记录一下安装 docker 的流程</p>
<p>内容全部来源于<a href="https://yeasy.gitbook.io/docker_practice/install/ubuntu">docker 从入门到实践</a></p>
<h2 id="安装">安装</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 卸载旧版本</span>
sudo apt-get remove docker docker-engine docker.io

<span style="color:#75715e"># 使用 APT 安装</span>
sudo apt-get update

sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release
</code></pre></div><p>添加软件源的 GPG 密钥</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 为了确认所下载软件包的合法性，需要添加软件源的 GPG 密钥。</span>
<span style="color:#75715e"># 这里使用国内源</span>
curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

<span style="color:#75715e"># 官方源</span>
<span style="color:#75715e"># curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span>
</code></pre></div><p>添加 docker 软件源</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 向 sources.list 中添加 Docker 软件源</span>
echo <span style="color:#e6db74">&#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu  </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

<span style="color:#75715e"># 官方源</span>
<span style="color:#75715e"># echo \</span>
<span style="color:#75715e">#   &#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span>
<span style="color:#75715e">#   $(lsb_release -cs) stable&#34; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span>

<span style="color:#75715e"># 以上命令会添加稳定版本的 Docker APT 镜像源，如果需要测试版本的 Docker 请将 stable 改为 test</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 若你想安装测试版的 Docker, 请从 test.docker.com 获取脚本</span>
<span style="color:#75715e"># 这里使用镜像</span>
<span style="color:#75715e"># $ curl -fsSL test.docker.com -o get-docker.sh</span>
curl -fsSL get.docker.com -o get-docker.sh
sudo sh get-docker.sh --mirror Aliyun
<span style="color:#75715e"># $ sudo sh get-docker.sh --mirror AzureChinaCloud</span>
</code></pre></div><h2 id="启动-docker">启动 Docker</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl enable docker
sudo systemctl start docker
</code></pre></div><h2 id="建立-docker-用户组">建立 Docker 用户组</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo groupadd docker
<span style="color:#75715e"># 将用户添加到 docker 组</span>
sudo usermod -aG docker $USER
sudo usermod -aG docker your_name
</code></pre></div><p>这里解释一下这条命令</p>
<ul>
<li><code>usermod</code> 命令是用于修改用户帐户属性的工具
<ul>
<li>用户名称: <code>-l</code> 允许你修改用户的登录名称。</li>
<li>用户组: <code>-g</code> 用于更改用户的初始登录组。</li>
<li><code>home</code> 目录: <code>-d</code> 选项允许你修改用户的 <code>home</code> 目录。</li>
<li>用户说明: <code>-c</code> 选项允许你为用户添加一段说明。</li>
<li>账户过期日期: <code>-e</code> 选项允许你设置用户账户的过期日期。</li>
<li>密码过期日期: <code>-f</code> 选项允许你设置密码过期日期。</li>
</ul>
</li>
</ul>
<p>对应的命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo usermod -l new_username old_username

sudo usermod -g new_groupname username

sudo usermod -d /new/home/directory username

sudo usermod -c <span style="color:#e6db74">&#34;User description&#34;</span> username

sudo usermod -e YYYY-MM-DD username

sudo usermod -f days username
</code></pre></div><ul>
<li><code>-aG</code>: 这是两个选项的组合：
<ul>
<li><code>-a</code> 表示 &ldquo;append&rdquo;，它会向用户添加一个新的组（在这种情况下，是将用户添加到 docker 组）。</li>
<li><code>-G</code> 指定要添加用户到的组。</li>
</ul>
</li>
</ul>
<h2 id="测试">测试</h2>
<p>关闭当前终端, 重新打开, 运行下面代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run --rm hello-world

<span style="color:#75715e"># 如果成功就是下面这样</span>
Unable to find image <span style="color:#e6db74">&#39;hello-world:latest&#39;</span> locally
latest: Pulling from library/hello-world
c1ec31eb5944: Pull complete                                                                                             Digest: sha256:4bd78111b6914a99dbc560e6a20eab57ff6655aea4a80c50b0c5491968cbc2e6
Status: Downloaded newer image <span style="color:#66d9ef">for</span> hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the <span style="color:#e6db74">&#34;hello-world&#34;</span> image from the Docker Hub.
    <span style="color:#f92672">(</span>amd64<span style="color:#f92672">)</span>
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre></div>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
