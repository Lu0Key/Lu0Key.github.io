<!doctype html>
<html lang="en-us">
  <head>
    <title>Mybatis // æ´›ä¸ƒçš„æ‘¸é±¼æ± å¡˜</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="æ´›ä¸ƒ" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.0fb49e70a30412f97ddfc418e18fefef1d9fcdebe45f634dbbba768b00fe1eec.css" />
    

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mybatis"/>
<meta name="twitter:description" content="MyBatis MyBatiså®˜ç½‘
ç®€ä»‹ ä»€ä¹ˆæ˜¯MaBatisï¼Ÿ  MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚ MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚ MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚  å¦‚ä½•è·å¾—MyBatisï¼Ÿ
 github maven  &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.2&lt;/version&gt; &lt;/dependency&gt; æŒä¹…åŒ– æ•°æ®æŒä¹…åŒ–
 æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹ å†…å­˜ï¼šæ–­ç”µå³å¤± æ•°æ®åº“(JDBC)ã€IOæ–‡ä»¶æŒä¹…åŒ–  ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ
 æœ‰ä¸€äº›æ•°æ®ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰ å†…å­˜å¤ªè´µäº†  æŒä¹…å±‚  å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å— å±‚ç•Œé™ååˆ†æ˜æ˜¾  ä¸ºä»€ä¹ˆéœ€è¦MyBatisï¼Ÿ  æ–¹ä¾¿ ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ã€‚ç®€åŒ–ï¼Œæ¡†æ¶ å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­ ä¸ç”¨MyBatisä¹Ÿå¯ä»¥ï¼ŒMyBatisæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ† ä¼˜ç‚¹  sqlå’Œä»£ç åˆ†ç¦» æ›´å®¹æ˜“å•å…ƒæµ‹è¯• æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sql    æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤š"/>

    <meta property="og:title" content="Mybatis" />
<meta property="og:description" content="MyBatis MyBatiså®˜ç½‘
ç®€ä»‹ ä»€ä¹ˆæ˜¯MaBatisï¼Ÿ  MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚ MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚ MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚  å¦‚ä½•è·å¾—MyBatisï¼Ÿ
 github maven  &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.2&lt;/version&gt; &lt;/dependency&gt; æŒä¹…åŒ– æ•°æ®æŒä¹…åŒ–
 æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹ å†…å­˜ï¼šæ–­ç”µå³å¤± æ•°æ®åº“(JDBC)ã€IOæ–‡ä»¶æŒä¹…åŒ–  ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ
 æœ‰ä¸€äº›æ•°æ®ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰ å†…å­˜å¤ªè´µäº†  æŒä¹…å±‚  å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å— å±‚ç•Œé™ååˆ†æ˜æ˜¾  ä¸ºä»€ä¹ˆéœ€è¦MyBatisï¼Ÿ  æ–¹ä¾¿ ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ã€‚ç®€åŒ–ï¼Œæ¡†æ¶ å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­ ä¸ç”¨MyBatisä¹Ÿå¯ä»¥ï¼ŒMyBatisæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ† ä¼˜ç‚¹  sqlå’Œä»£ç åˆ†ç¦» æ›´å®¹æ˜“å•å…ƒæµ‹è¯• æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sql    æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Lu0key.github.io/post/mybatis/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-02-15T22:05:30&#43;08:00" />
<meta property="article:modified_time" content="2021-02-15T22:05:30&#43;08:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://Lu0key.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="æ´›ä¸ƒ" /></a>
      <span class="app-header-title">æ´›ä¸ƒçš„æ‘¸é±¼æ± å¡˜</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/tags/">Tags</a>
      </nav>
      <p>å³å°†æ²¡ä¹¦è¯»çš„å’¸é±¼</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Mybatis</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Feb 15, 2021
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          10 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://Lu0key.github.io/tags/mybatis/">MyBatis</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="mybatis">MyBatis</h1>
<p><a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatiså®˜ç½‘</a></p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<h3 id="ä»€ä¹ˆæ˜¯mabatis">ä»€ä¹ˆæ˜¯MaBatisï¼Ÿ</h3>
<ul>
<li>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</li>
<li>å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚</li>
<li>MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚</li>
<li>MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
</ul>
<p>å¦‚ä½•è·å¾—MyBatisï¼Ÿ</p>
<ul>
<li>github</li>
<li><a href="https://mvnrepository.com/">maven</a></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
    <span style="color:#f92672">&lt;groupId&gt;</span>org.mybatis<span style="color:#f92672">&lt;/groupId&gt;</span>
    <span style="color:#f92672">&lt;artifactId&gt;</span>mybatis<span style="color:#f92672">&lt;/artifactId&gt;</span>
    <span style="color:#f92672">&lt;version&gt;</span>3.5.2<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div><h3 id="æŒä¹…åŒ–">æŒä¹…åŒ–</h3>
<p>æ•°æ®æŒä¹…åŒ–</p>
<ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li>
<li>å†…å­˜ï¼šæ–­ç”µå³å¤±</li>
<li>æ•°æ®åº“(JDBC)ã€IOæ–‡ä»¶æŒä¹…åŒ–</li>
</ul>
<p>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ</p>
<ul>
<li>æœ‰ä¸€äº›æ•°æ®ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰</li>
<li>å†…å­˜å¤ªè´µäº†</li>
</ul>
<h3 id="æŒä¹…å±‚">æŒä¹…å±‚</h3>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦mybatis">ä¸ºä»€ä¹ˆéœ€è¦MyBatisï¼Ÿ</h3>
<ul>
<li>æ–¹ä¾¿</li>
<li>ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ã€‚ç®€åŒ–ï¼Œæ¡†æ¶</li>
<li>å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­</li>
<li>ä¸ç”¨MyBatisä¹Ÿå¯ä»¥ï¼ŒMyBatisæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†</li>
<li>ä¼˜ç‚¹
<ul>
<li>sqlå’Œä»£ç åˆ†ç¦»</li>
<li>æ›´å®¹æ˜“å•å…ƒæµ‹è¯•</li>
<li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sql</li>
</ul>
</li>
</ul>
<p>æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤š</p>
<h2 id="ç¬¬ä¸€ä¸ªmybatisç¨‹åº">ç¬¬ä¸€ä¸ªMyBatisç¨‹åº</h2>
<p>æ€è·¯ï¼šæ­å»ºç¯å¢ƒ&ndash;&gt;å¯¼å…¥MyBatis&ndash;&gt;ç¼–å†™ä»£ç &ndash;&gt;æµ‹è¯•</p>
<h3 id="æ­å»ºç¯å¢ƒ">æ­å»ºç¯å¢ƒ</h3>
<p>æ­å»ºæ•°æ®åº“</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> <span style="color:#f92672">`</span>mybatis<span style="color:#f92672">`</span>;

USE <span style="color:#f92672">`</span>mysqtis<span style="color:#f92672">`</span>;

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span>(
  <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
  <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
  <span style="color:#f92672">`</span>pwd<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>
)ENGINE<span style="color:#f92672">=</span>INNODB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span>(<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>pwd<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span>
(<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#39;ä½ å¥½&#39;</span>,<span style="color:#e6db74">&#39;123231&#39;</span>),
(<span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;asd&#39;</span>,<span style="color:#e6db74">&#39;adsas&#39;</span>),
(<span style="color:#ae81ff">3</span>,<span style="color:#e6db74">&#39;aaaaa&#39;</span>,<span style="color:#e6db74">&#39;aaasd123&#39;</span>)
</code></pre></div><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®</p>
<ol>
<li>å…ˆå»ºä¸€ä¸ªæ™®é€šmavené¡¹ç›®</li>
<li>åˆ é™¤srcç›®å½•ï¼Œä½œä¸ºçˆ¶å·¥ç¨‹(è¿™æ ·å­é¡¹ç›®ä¸è¦é‡å¤å¯¼åŒ…)</li>
<li>å¯¼å…¥mavenä¾èµ–</li>
</ol>
<h3 id="åˆ›å»ºä¸€ä¸ªæ¨¡å—">åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3>
<ul>
<li>ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE configuration
</span><span style="color:#75715e">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span><span style="color:#75715e">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
<span style="color:#75715e">&lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span>
<span style="color:#f92672">&lt;configuration&gt;</span>

    <span style="color:#f92672">&lt;environments</span> <span style="color:#a6e22e">default=</span><span style="color:#e6db74">&#34;development&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;environment</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;development&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;transactionManager</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;JDBC&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;dataSource</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;POOLED&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;driver&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;com.mysql.jdbc.Driver&#34;</span><span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;url&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;jdbc:mysql://localhost:3306/mybatis?userSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&#34;</span><span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;username&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;root&#34;</span><span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;password&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;/dataSource&gt;</span>
        <span style="color:#f92672">&lt;/environment&gt;</span>
    <span style="color:#f92672">&lt;/environments&gt;</span>

<span style="color:#f92672">&lt;/configuration&gt;</span>
</code></pre></div><ul>
<li>ç¼–å†™mybatiså·¥å…·ç±»</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#75715e">// sqlSessionFactory --&gt; sqlSession
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MybatisUtils</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> SqlSessionFactory sqlSessionFactory<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">static</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span><span style="color:#f92672">{</span>
            String resource <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mybatis-config.xml&#34;</span><span style="color:#f92672">;</span>
            InputStream inputStream <span style="color:#f92672">=</span> Resources<span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span>resource<span style="color:#f92672">);</span>
            sqlSessionFactory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SqlSessionFactoryBuilder<span style="color:#f92672">().</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span>inputStream<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">){</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// æ—¢ç„¶æœ‰ä¸ªsqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾—sqlSession çš„å®ä¾‹äº†
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// sqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> SqlSession <span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">return</span> sqlSessionFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">openSession</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç </h3>
<ul>
<li>å®ä½“ç±»</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.luo.pojo<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String pwd<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">User</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">User</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> id<span style="color:#f92672">,</span> String name<span style="color:#f92672">,</span> String pwd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> id<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pwd</span> <span style="color:#f92672">=</span> pwd<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getId</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> id<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setId</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> id<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getPwd</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pwd<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPwd</span><span style="color:#f92672">(</span>String pwd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pwd</span> <span style="color:#f92672">=</span> pwd<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;User{&#34;</span> <span style="color:#f92672">+</span>
                <span style="color:#e6db74">&#34;id=&#34;</span> <span style="color:#f92672">+</span> id <span style="color:#f92672">+</span>
                <span style="color:#e6db74">&#34;, name=&#39;&#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;\&#39;&#39;</span> <span style="color:#f92672">+</span>
                <span style="color:#e6db74">&#34;, pwd=&#39;&#34;</span> <span style="color:#f92672">+</span> pwd <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;\&#39;&#39;</span> <span style="color:#f92672">+</span>
                <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>Daoæ¥å£</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">UserDao</span> <span style="color:#f92672">{</span>
    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUserList</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>æ¥å£å®ç°ç±»
ğŸ‘‰åŸæ¥çš„UserDaoImplè½¬å˜ä¸ºä¸€ä¸ªMapperé…ç½®æ–‡ä»¶</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE mapper
</span><span style="color:#75715e">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span style="color:#75715e">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
<span style="color:#75715e">&lt;!-- namespace=ç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapper æ¥å£--&gt;</span>
<span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">namespace=</span><span style="color:#e6db74">&#34;com.luo.dao.UserDao&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#75715e">&lt;!--selectæŸ¥è¯¢è¯­å¥--&gt;</span>
    <span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserList&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span> <span style="color:#f92672">&gt;</span>
        select * from mybatis.user
    <span style="color:#f92672">&lt;/select&gt;</span>
<span style="color:#f92672">&lt;/mapper&gt;</span>
</code></pre></div><h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<p>æ³¨æ„ç‚¹ï¼š</p>
<pre><code>org.apache.ibatis.binding.BindingException: Type interface com.luo.dao.UserDao is not known to the MapperRegistry
</code></pre><p>MapperRegistryæ˜¯ä»€ä¹ˆï¼Ÿ
åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmappers
åœ¨<code>mybatis-config.xml</code>çš„configurationä¸­åŠ å…¥</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#f92672">&lt;mappers&gt;</span>
        <span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">resource=</span><span style="color:#e6db74">&#34;com/luo/dao/UserMapper.xml&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/mappers&gt;</span>
</code></pre></div><p>èµ„æºè¿‡æ»¤é—®é¢˜</p>
<pre><code>Could not find resource com/luo/dao/UserMapper.xml
</code></pre><p>æˆ‘ä»¬å†™çš„é…ç½®æ–‡ä»¶ï¼Œæ— æ³•è¢«å¯¼å‡ºæˆ–è€…ç”Ÿæ•ˆï¼Œè§£å†³æ–¹æ¡ˆä¸ºï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!-- åœ¨buildä¸­é…ç½®resourcesï¼Œé˜²æ­¢å‡ºç°èµ„æºå¯¼å‡ºå¤±è´¥ --&gt;</span>
<span style="color:#f92672">&lt;build&gt;</span>
    <span style="color:#f92672">&lt;resources&gt;</span>
        <span style="color:#f92672">&lt;resource&gt;</span>
            <span style="color:#f92672">&lt;directory&gt;</span>src/main/resources<span style="color:#f92672">&lt;/directory&gt;</span>
            <span style="color:#f92672">&lt;includes&gt;</span>
                <span style="color:#f92672">&lt;include&gt;</span>**/*.properties<span style="color:#f92672">&lt;/include&gt;</span>
                <span style="color:#f92672">&lt;include&gt;</span>**/*.xml<span style="color:#f92672">&lt;/include&gt;</span>
            <span style="color:#f92672">&lt;/includes&gt;</span>
            <span style="color:#f92672">&lt;filtering&gt;</span>true<span style="color:#f92672">&lt;/filtering&gt;</span>
        <span style="color:#f92672">&lt;/resource&gt;</span>
        <span style="color:#f92672">&lt;resource&gt;</span>
            <span style="color:#f92672">&lt;directory&gt;</span>src/main/java<span style="color:#f92672">&lt;/directory&gt;</span>
            <span style="color:#f92672">&lt;includes&gt;</span>
                <span style="color:#f92672">&lt;include&gt;</span>**/*.properties<span style="color:#f92672">&lt;/include&gt;</span>
                <span style="color:#f92672">&lt;include&gt;</span>**/*.xml<span style="color:#f92672">&lt;/include&gt;</span>
            <span style="color:#f92672">&lt;/includes&gt;</span>
            <span style="color:#f92672">&lt;filtering&gt;</span>true<span style="color:#f92672">&lt;/filtering&gt;</span>
        <span style="color:#f92672">&lt;/resource&gt;</span>
    <span style="color:#f92672">&lt;/resources&gt;</span>
<span style="color:#f92672">&lt;/build&gt;</span>
</code></pre></div><p>é‡åˆ°çš„å‡ ä¸ªé—®é¢˜</p>
<ol>
<li></li>
</ol>
<pre><code>1å­—èŠ‚çš„UTF-8åºåˆ—çš„å­—èŠ‚1æ— æ•ˆ
</code></pre><p>è§£å†³æ–¹æ³•ï¼š</p>
<pre><code>æŠŠæ¯ä¸ªxmlä¸Šé¢çš„encodingçš„UTF-8æ”¹æˆUTF8
</code></pre><ol start="2">
<li></li>
</ol>
<pre><code>The server time zone value 'ï¿½Ğ¹ï¿½ï¿½ï¿½×¼Ê±ï¿½ï¿½' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.
</code></pre><p>è§£å†³æ–¹æ³•</p>
<pre><code>åœ¨é…ç½®mybatis-configçš„æ—¶å€™urlåŠ ä¸Šæ—¶åŒºä¿¡æ¯&amp;amp;serverTimezone=UTC
</code></pre><ol start="3">
<li></li>
</ol>
<pre><code>Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
</code></pre><p>è§£å†³åŠæ³•ï¼š</p>
<pre><code>è¿™æ˜¯å› ä¸ºmysql8 æ¢é©±åŠ¨äº†ï¼Œåœ¨mybatis-configä¸­æŠŠdriverä»com.mysql.jdbc.Driveræ”¹æˆcom.mysql.cj.jdbc.Driverå³å¯
</code></pre><ul>
<li>junitæµ‹è¯•</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserDaoTest</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Test</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span><span style="color:#f92672">(){</span>

        <span style="color:#75715e">// è·å¾—SqlSessionå¯¹è±¡
</span><span style="color:#75715e"></span>        SqlSession sqlSession <span style="color:#f92672">=</span> MybatisUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">();</span>


        <span style="color:#75715e">// æ‰§è¡ŒSql
</span><span style="color:#75715e"></span>        UserDao userDao <span style="color:#f92672">=</span> sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">getMapper</span><span style="color:#f92672">(</span>UserDao<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
        List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> userList <span style="color:#f92672">=</span> userDao<span style="color:#f92672">.</span><span style="color:#a6e22e">getUserList</span><span style="color:#f92672">();</span>

        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>User user <span style="color:#f92672">:</span> userList<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// å…³é—­SqlSession
</span><span style="color:#75715e"></span>        sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="crud">CRUD</h2>
<p>ä¸€èˆ¬åœ¨ä½¿ç”¨MaBatisçš„æ—¶å€™ä¸è¯´Daoè€Œæ˜¯è¯´Mapperï¼Œå› æ­¤å°†UserDaoæ”¹æˆUserMapper</p>
<h3 id="namespace">namespace</h3>
<p>namespaceä¸­çš„åŒ…åè¦å’ŒDao/mapperæ¥å£çš„åŒ…åä¸€è‡´</p>
<h3 id="select">select</h3>
<p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥</p>
<ul>
<li>idï¼šå°±æ˜¯å¯¹åº”çš„namespaceä¸­çš„æ–¹æ³•å</li>
<li>resultTypeï¼šsqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼</li>
<li>parameterTypeï¼šå‚æ•°ç±»å‹</li>
</ul>
<p><strong>å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡</strong>ï¼šsqlSession.commit();</p>
<ol>
<li>ç¼–å†™æ¥å£</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·
</span><span style="color:#75715e"></span>User <span style="color:#a6e22e">getUserById</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> id<span style="color:#f92672">);</span>
</code></pre></div><ol start="2">
<li>ç¼–å†™å¯¹åº”çš„mapperä¸­çš„sqlè¯­å¥</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserById&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;int&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span><span style="color:#f92672">&gt;</span>
    select * from mybatis.user where id = #{id}
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><ol start="3">
<li>æµ‹è¯•</li>
</ol>
<h3 id="insert">Insert</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;insert</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;addUser&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span><span style="color:#f92672">&gt;</span>
    insert into mybatis.user (id, name, pwd) values (#{id},#{name},#{pwd})
<span style="color:#f92672">&lt;/insert&gt;</span>
</code></pre></div><h3 id="update">update</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;update</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;updateUser&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span><span style="color:#f92672">&gt;</span>
    update mybatis.user
    set name = #{name},pwd = #{pwd}
    where id = #{id};
<span style="color:#f92672">&lt;/update&gt;</span>
</code></pre></div><h3 id="delete">Delete</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;delete</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;deleteUser&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span><span style="color:#f92672">&gt;</span>
    delete from mybatis.user where id = #{id};
<span style="color:#f92672">&lt;/delete&gt;</span>
</code></pre></div><p>æ³¨æ„ç‚¹ï¼šå¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡</p>
<h3 id="map">Map</h3>
<p>å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä½¿ç”¨Mapï¼Œæ¯”å¦‚ä¿®æ”¹å¯†ç ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ idå’Œæ–°å¯†ç å³å¯ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç”¨Mapæ¯”Userç±»æ›´æ–¹ä¾¿</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;update</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;updateUser&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span><span style="color:#f92672">&gt;</span>
    update mybatis.user
    set name = #{name},pwd = #{pwd}
    where id = #{id};
<span style="color:#f92672">&lt;/update&gt;</span>
</code></pre></div><p>å¦‚æœç”¨çš„æ˜¯Userï¼Œé‚£ä¹ˆå¿…é¡»å­—æ®µè¦å’ŒUserçš„å¯¹åº”ï¼Œå¦‚æœæ˜¯mapï¼Œé‚£å­—æ®µå¯ä»¥æŒ‰è‡ªå·±çš„æƒ³æ³•è®¾ç½®<br>
Mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯<br>
å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºå¯¹è±¡çš„å±æ€§å³å¯<br>
åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°<br>
å¤šä¸ªå‚æ•°ç”¨Mapï¼Œæˆ–è€…æ³¨è§£</p>
<h3 id="æ€è€ƒé¢˜">æ€è€ƒé¢˜</h3>
<p>å¦‚ä½•å†™æ¨¡ç³ŠæŸ¥è¯¢ï¼Ÿ</p>
<ol>
<li>Javaä¼ é€’çš„æ—¶å€™æ‹¼æ¥é€šé…ç¬¦%%</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> userList <span style="color:#f92672">=</span> mapper<span style="color:#f92672">.</span><span style="color:#a6e22e">getUserLike</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%å¼ %&#34;</span><span style="color:#f92672">);</span>
</code></pre></div><ol start="2">
<li>åœ¨SQLæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserLike&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;String&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span><span style="color:#f92672">&gt;</span>
    select * from mybatis.user where name like &#34;%&#34;#{value}&#34;%&#34;
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><h2 id="é…ç½®è§£æ">é…ç½®è§£æ</h2>
<h3 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶">æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3>
<ul>
<li>mybatis-config.xml</li>
<li>MyBatisçš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“MyBatisè¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯</li>
</ul>
<pre><code>configurationï¼ˆé…ç½®ï¼‰
propertiesï¼ˆå±æ€§ï¼‰
settingsï¼ˆè®¾ç½®ï¼‰
typeAliasesï¼ˆç±»å‹åˆ«åï¼‰
typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰
objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰
pluginsï¼ˆæ’ä»¶ï¼‰
environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰
environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰
transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰
dataSourceï¼ˆæ•°æ®æºï¼‰
databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰
mappersï¼ˆæ˜ å°„å™¨ï¼‰
</code></pre><h3 id="ç¯å¢ƒé…ç½®environments">ç¯å¢ƒé…ç½®(environments)</h3>
<p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ<br>
<strong>å°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p>MyBatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯JDBCï¼Œè¿æ¥æ± POOLED</p>
<h3 id="å±æ€§properties">å±æ€§(properties)</h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶</p>
<p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚</p>
<p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶
db.properties</p>
<pre><code class="language-properties" data-lang="properties">driver=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/mybatis?userSSL=true&amp;useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=UTC
username=root
password=123456
</code></pre><p>åœ¨xmlä¸­ï¼Œæ‰€æœ‰æ ‡ç­¾éƒ½å¯ä»¥è§„å®šå…¶é¡ºåº</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span>
<span style="color:#f92672">&lt;properties</span> <span style="color:#a6e22e">resource=</span><span style="color:#e6db74">&#34;db.properties&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œå†åŠ ä¸Šä¸€äº›</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span>
<span style="color:#f92672">&lt;properties</span> <span style="color:#a6e22e">resource=</span><span style="color:#e6db74">&#34;db.properties&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;A&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;hhh&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;B&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;123&#34;</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/properties&gt;</span>
</code></pre></div><h3 id="ç±»å‹åˆ«åtypealiases">ç±»å‹åˆ«å(typeAliases)</h3>
<ul>
<li>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—</li>
<li>å­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span>
<span style="color:#f92672">&lt;typeAliases&gt;</span>
    <span style="color:#f92672">&lt;typeAlias</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;com.luo.pojo.User&#34;</span> <span style="color:#a6e22e">alias=</span><span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/typeAliases&gt;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„Java Beanï¼Œæ¯”å¦‚ï¼š
æ‰«æå®ä½“ç±»çš„åŒ…ï¼Œå®ƒçš„é»˜è®¤åˆ«åå°±ä¸ºè¿™ä¸ªç±»çš„ç±»åçš„é¦–å­—æ¯å°å†™ï¼<br>
æ¯”å¦‚æ‰«æ<code>com.luo.pojo</code> è¿™ä¸ªåŒ…ï¼Œå°±é»˜è®¤é‡Œé¢çš„<code>com.luo.pojo.User</code> çš„åˆ«åä¸ºuser</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;typeAliases&gt;</span>
    <span style="color:#f92672">&lt;package</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;com.luo.pojo&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/typeAliases&gt;</span>
</code></pre></div><p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼<br>
å¦‚æœå®ä½“ç±»æ¯”è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚<br>
ç¬¬ä¸€ç§å¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§åˆ™ä¸è¡Œï¼Œå¦‚æœä¸€å®šè¦æ”¹ï¼Œå¯ä»¥åœ¨å®ä½“ç±»ä¸Šå¢åŠ æ³¨è§£</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Alias</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span><span style="color:#f92672">{</span>
    <span style="color:#75715e">// ä»£ç 
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><h3 id="è®¾ç½®settings">è®¾ç½®(settings)</h3>
<p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ ä¸‹è¡¨æè¿°äº†è®¾ç½®ä¸­å„é¡¹è®¾ç½®çš„å«ä¹‰ã€é»˜è®¤å€¼ç­‰ã€‚<br>
<a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">è®¾ç½®è¡¨æ ¼</a></p>
<table>
<thead>
<tr>
<th>è®¾ç½®å</th>
<th>æè¿°</th>
<th>æœ‰æ•ˆå€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>cacheEnabled</td>
<td>å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜.</td>
<td>true | false</td>
<td>true</td>
</tr>
<tr>
<td>lazyLoadingEnabled</td>
<td>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® fetchTypeå±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€</td>
<td>true|false</td>
<td>false</td>
</tr>
<tr>
<td>logImpl</td>
<td>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td>
<td>SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td>
<td>æœªè®¾ç½®</td>
</tr>
</tbody>
</table>
<h3 id="å…¶ä»–é…ç½®">å…¶ä»–é…ç½®</h3>
<ul>
<li>typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</li>
<li>objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</li>
<li>pluginsï¼ˆæ’ä»¶ï¼‰
<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨mapper</li>
</ul>
</li>
</ul>
<h3 id="æ˜ å°„å™¨mappers">æ˜ å°„å™¨(mappers)</h3>
<p>MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶</p>
<p>æ–¹å¼ä¸€ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span>
<span style="color:#f92672">&lt;mappers&gt;</span>
    <span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">resource=</span><span style="color:#e6db74">&#34;com/luo/dao/UserMapper.xml&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/mappers&gt;</span>
</code></pre></div><p>æ–¹å¼äºŒï¼š ä½¿ç”¨classæ–‡ä»¶ç»‘å®š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;mappers&gt;</span>
    <span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.luo.dao.UserMapper&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/mappers&gt;</span>
</code></pre></div><p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</li>
</ul>
<p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œç»‘å®š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;mappers&gt;</span>
    <span style="color:#f92672">&lt;package</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;com.luo.dao&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/mappers&gt;</span>
</code></pre></div><p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</li>
</ul>
<h3 id="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ">ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3>
<p>å£°æ˜å‘¨æœŸå’Œä½œç”¨åŸŸï¼Œæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong></p>
<p><strong>SqlSessionFactoryBuilder</strong>ï¼š</p>
<ul>
<li>ä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦ä»–äº†</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
<p><strong>SqlSessionFactory</strong>ï¼š</p>
<ul>
<li>è¯´ç™½äº†å°±å¯ä»¥æƒ³è±¡ä¸ºï¼šæ•°æ®åº“è¿æ¥æ± </li>
<li>SqlSessionFactoryä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€è‡´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹</li>
<li>å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸ</li>
<li>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–é™æ€å•ä¾‹æ¨¡å¼</li>
</ul>
<p><strong>SqlSession</strong>ï¼š</p>
<ul>
<li>è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚SqlSessionçš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸ</li>
<li>ç”¨å®Œä¹‹åè¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨</li>
</ul>
<p>Sessionå¯ä»¥æ‰§è¡Œä¸åŒçš„ä¸šåŠ¡(å¯¹åº”ä¸åŒçš„Mapper)</p>
<h2 id="è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜">è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h2>
<h3 id="é—®é¢˜">é—®é¢˜</h3>
<p>æ•°æ®åº“ä¸­çš„å­—æ®µ</p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•Â·æµ‹è¯•å®ä½“ç±»å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String password<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>æµ‹è¯•å‡ºç°é—®é¢˜</p>
<pre><code>// select * from mybatis.user where id = #{id}
// ç±»å‹å¤„ç†å™¨
// select id, name, pwd from mybatis.user where id = #{id}
</code></pre><p>è§£å†³æ–¹æ³•ï¼š<br>
æœ€ç®€å•çš„ï¼Œèµ·åˆ«å</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> id, name, pwd <span style="color:#66d9ef">as</span> password <span style="color:#66d9ef">from</span> mybatis.<span style="color:#66d9ef">user</span> <span style="color:#66d9ef">where</span> id <span style="color:#f92672">=</span> <span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">{</span>id<span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><h3 id="resultmap">resultMap</h3>
<p>ç»“æœé›†æ˜ å°„</p>
<pre><code>id name pwd
id name password
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;UserMap&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#75715e">&lt;!--columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;pwd&#34;</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/resultMap&gt;</span>

<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserById&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;int&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;UserMap&#34;</span><span style="color:#f92672">&gt;</span>
    select id, name, pwd as password from mybatis.user where id = #{id}
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><ul>
<li><strong>resultMap</strong> å…ƒç´ æ˜¯MyBatisä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ </li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°ä»–ä»¬çš„å…³ç³»å°±è¡Œäº†</li>
<li>resultMap æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;UserMap&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#75715e">&lt;!--columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;pwd&#34;</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/resultMap&gt;</span>
</code></pre></div><p>ä¹‹å‰çš„resultMapå¯ä»¥å°†ç›¸åŒçš„å»æ‰ï¼Œåªç•™ä¸‹éœ€è¦æ›´æ”¹çš„æ˜ å°„</p>
<h2 id="æ—¥å¿—">æ—¥å¿—</h2>
<h3 id="æ—¥å¿—å·¥å‚">æ—¥å¿—å·¥å‚</h3>
<p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ã€‚æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ï¼<br>
ä¹‹å‰ï¼šsoutã€debug<br>
ç°åœ¨ï¼šæ—¥å¿—å·¥å‚<br>
MyBatisæœ‰ä¸€ä¸ªlogImpl</p>
<ul>
<li>SLF4J</li>
<li>LOG4Jã€éœ€æŒæ¡ã€‘</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGINGã€éœ€æŒæ¡ã€‘</li>
<li>NO_LOGGING</li>
</ul>
<p>åœ¨MyBatisä¸­å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªä½“åˆ¶å®ç°ï¼Œåœ¨è®¾ç½®ä¸­è®¾å®š<br>
<strong>STDOUT_LOGGING æ ‡å‡†æ—¥å¿—è¾“å‡º</strong></p>
<h3 id="log4j">Log4j</h3>
<p>è¦åœ¨settingsé‡Œé…ç½®ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜è¦æ·»åŠ ä¾èµ–</p>
<p>ä»€ä¹ˆæ˜¯Log4j?</p>
<ul>
<li>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶</li>
<li>æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹</li>
<li>è¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç </li>
</ul>
<ol>
<li>å¯¼å…¥log4jçš„åŒ…</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;dependency&gt;</span>
    <span style="color:#f92672">&lt;groupId&gt;</span>log4j<span style="color:#f92672">&lt;/groupId&gt;</span>
    <span style="color:#f92672">&lt;artifactId&gt;</span>log4j<span style="color:#f92672">&lt;/artifactId&gt;</span>
    <span style="color:#f92672">&lt;version&gt;</span>1.2.17<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div><ol start="2">
<li>log4j.properties</li>
</ol>
<pre><code class="language-properties" data-lang="properties"># å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢
log4j.rootLogger=DEBUG,console,file

# æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.Target = System.out
log4j.appender.console.Threshold = DEBUG
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%c]-%m%n

# æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log/debug.log
log4j.appender.file.MaxFileSize=10mb
log4j.appender.file.Threshold=DEBUG
log4j.appender.file.layout = org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]-%m%n

# æ—¥å¿—è¾“å‡ºçº§åˆ«
log4j.logger.org.mybatis=DEBUG
log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Statement=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG
log4j.logger.java.sql.PreparedStatement=DEBUG
</code></pre><ol start="3">
<li>é…ç½®log4jä¸ºæ—¥å¿—çš„å®ç°</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;settings&gt;</span>
    <span style="color:#f92672">&lt;setting</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;logImpl&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;LOG4J&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/settings&gt;</span>
</code></pre></div><ol start="4">
<li>Log4jçš„ä½¿ç”¨ï¼Œç›´æ¥è¿è¡Œä¹‹å‰çš„æµ‹è¯•</li>
</ol>
<p><strong>ç®€å•ä½¿ç”¨</strong></p>
<ol>
<li>åœ¨è¦ä½¿ç”¨Log4jçš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ…</li>
<li>æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> Logger logger <span style="color:#f92672">=</span> logger<span style="color:#f92672">.</span><span style="color:#a6e22e">getLogger</span><span style="color:#f92672">(</span>UserDaoTest<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</code></pre></div><ol start="3">
<li>æ—¥å¿—çº§åˆ«</li>
</ol>
<ul>
<li>info</li>
<li>debug</li>
<li>error</li>
</ul>
<h2 id="åˆ†é¡µ">åˆ†é¡µ</h2>
<p>ä¸ºä»€ä¹ˆè¦åˆ†é¡µï¼Ÿ</p>
<ul>
<li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li>
</ul>
<h3 id="ä½¿ç”¨limitåˆ†é¡µ">ä½¿ç”¨Limitåˆ†é¡µ</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">3</span>; <span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">ç›¸å½“äº</span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">3</span>]
</code></pre></div><p>ä½¿ç”¨Mybatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒSQL</p>
<ol>
<li>æ¥å£</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUserByLimit</span><span style="color:#f92672">(</span>Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map<span style="color:#f92672">);</span>
</code></pre></div><ol start="2">
<li>Mapper.xml</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserByLimit&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;User&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;UserMap&#34;</span><span style="color:#f92672">&gt;</span>
    select * from mybatis.user limit #{startIndex},#{pageSize}
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><ol start="3">
<li>æµ‹è¯•</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">getUserByLimit</span><span style="color:#f92672">(){</span>

    <span style="color:#75715e">// è·å¾—SqlSessionå¯¹è±¡
</span><span style="color:#75715e"></span>    SqlSession sqlSession <span style="color:#f92672">=</span> MybatisUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">();</span>


    <span style="color:#75715e">// æ‰§è¡ŒSql
</span><span style="color:#75715e"></span>    UserMapper mapper <span style="color:#f92672">=</span> sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">getMapper</span><span style="color:#f92672">(</span>UserMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>

    Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>

    map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;startIndex&#34;</span><span style="color:#f92672">,</span>0<span style="color:#f92672">);</span>
    map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;pageSize&#34;</span><span style="color:#f92672">,</span>2<span style="color:#f92672">);</span>

    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> userList <span style="color:#f92672">=</span> mapper<span style="color:#f92672">.</span><span style="color:#a6e22e">getUserByLimit</span><span style="color:#f92672">(</span>map<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>User user <span style="color:#f92672">:</span> userList<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>


    <span style="color:#75715e">// å…³é—­SqlSession
</span><span style="color:#75715e"></span>    sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="rowboundsåˆ†é¡µäº†è§£å³å¯">RowBoundsåˆ†é¡µ(äº†è§£å³å¯)</h3>
<p>ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ</p>
<ol>
<li>æ¥å£</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUserByRowBounds</span><span style="color:#f92672">();</span>
</code></pre></div><ol start="2">
<li>mapper.xml</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getUserByRowBounds&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;UserMap&#34;</span><span style="color:#f92672">&gt;</span>
    select * from mybatis.user
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><ol start="3">
<li>æµ‹è¯•</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">getUserByRowBounds</span><span style="color:#f92672">(){</span>
    <span style="color:#75715e">// è·å¾—SqlSessionå¯¹è±¡
</span><span style="color:#75715e"></span>    SqlSession sqlSession <span style="color:#f92672">=</span> MybatisUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">// RowBounds å®ç°
</span><span style="color:#75715e"></span>    RowBounds rowBounds <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RowBounds<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> 2<span style="color:#f92672">);</span>

    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> userList <span style="color:#f92672">=</span> sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">selectList</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.luo.dao.UserMapper.getUserByRowBounds&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span>rowBounds<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>User user <span style="color:#f92672">:</span> userList<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// å…³é—­SqlSession
</span><span style="color:#75715e"></span>    sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="åˆ†é¡µæ’ä»¶">åˆ†é¡µæ’ä»¶</h3>
<p>ä¾‹å¦‚ï¼šMaBatisåˆ†é¡µæ’ä»¶ PageHelperï¼ˆäº†è§£å³å¯ï¼‰</p>
<h2 id="ä½¿ç”¨æ³¨è§£å¼€å‘">ä½¿ç”¨æ³¨è§£å¼€å‘</h2>
<h3 id="é¢å‘æ¥å£ç¼–ç¨‹">é¢å‘æ¥å£ç¼–ç¨‹</h3>
<ul>
<li>
<p>å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹,ä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹</p>
</li>
<li>
<p><strong>æ ¹æœ¬åŸå› : è§£è€¦ ,å¯æ‹“å±•,æé«˜å¤ç”¨,åˆ†å±‚å¼€å‘ä¸­,ä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç°,å¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡†,ä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“,è§„èŒƒæ€§æ›´å¥½</strong></p>
</li>
<li>
<p>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„ï¼Œå¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†;</p>
</li>
<li>
<p>è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’,åœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</p>
</li>
</ul>
<p><strong>å…³äºæ¥å£çš„ç†è§£</strong></p>
<ul>
<li>æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰(è§„èŒƒï¼Œ çº¦æŸ)ä¸å®ç°(åå®åˆ†ç¦»çš„åŸåˆ™)çš„åˆ†ç¦»ã€‚æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚</li>
<li>æ¥å£åº”æœ‰ä¸¤ç±»:
<ul>
<li>ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class);</li>
<li>ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€ æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ ä¸ªæŠ½è±¡é¢(interface) ;</li>
</ul>
</li>
<li>ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</li>
</ul>
<p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p>
<ul>
<li>
<p>é¢å‘å¯¹è±¡æ˜¯æŒ‡,æˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³•.</p>
</li>
<li>
<p>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹(äº‹åŠ¡è¿‡ç¨‹)ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç°.</p>
</li>
<li>
<p>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡(è¿‡ç¨‹)ä¸æ˜¯ä¸€ä¸ªé—®é¢˜.æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„.</p>
</li>
</ul>
<h3 id="ä½¿ç”¨æ³¨è§£å¼€å‘-1">ä½¿ç”¨æ³¨è§£å¼€å‘</h3>
<ol>
<li>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Select</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select * from user&#34;</span><span style="color:#f92672">)</span>
List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUsers</span><span style="color:#f92672">();</span>
</code></pre></div><ol start="2">
<li>éœ€è¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--ç»‘å®šæ¥å£--&gt;</span>
<span style="color:#f92672">&lt;mappers&gt;</span>
    <span style="color:#f92672">&lt;mapper</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.luo.dao.UserMapper&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/mappers&gt;</span>
</code></pre></div><ol start="3">
<li>æµ‹è¯•</li>
</ol>
<p>æœ¬è´¨ï¼šåå°„</p>
<p>MyBatisè¯¦ç»†çš„æ‰§è¡Œæµç¨‹</p>
<ol>
<li>Rescourceè·å–åŠ è½½å…¨å±€é…ç½®æ–‡ä»¶</li>
<li>å®ä¾‹åŒ–SqlSessionFactoryBuilderæ„é€ å™¨</li>
<li>è§£æé…ç½®æ–‡ä»¶æµXMLConfigBuilder</li>
<li>Configurationæ‰€æœ‰çš„é…ç½®ä¿¡æ¯</li>
<li>SqlSessionFactoryå®ä¾‹åŒ–</li>
<li>transactionaläº‹åŠ¡ç®¡ç†</li>
<li>åˆ›å»ºexecutoræ‰§è¡Œå™¨</li>
<li>åˆ›å»ºSqlSession</li>
<li>å®ç°CRUD
<ol>
<li>æŸ¥çœ‹æ˜¯å¦æˆåŠŸ
<ol>
<li>å¦ï¼Œå›æ»š</li>
<li>æ˜¯ï¼Œæäº¤äº‹åŠ¡(å¯ä»¥æ‰‹åŠ¨æäº¤)</li>
</ol>
</li>
</ol>
</li>
<li>å…³é—­</li>
</ol>
<h3 id="crud-1">CRUD</h3>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·ç±»åˆ›å»ºçš„æ—¶å€™å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> SqlSession <span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">(){</span>
    <span style="color:#66d9ef">return</span> sqlSessionFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">openSession</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>ç¼–å†™æ¥å£ï¼Œå¢åŠ æ³¨è§£</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Select</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select id,name,pwd as password from user&#34;</span><span style="color:#f92672">)</span>
List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUsers</span><span style="color:#f92672">();</span>

<span style="color:#75715e">// æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š @Param(&#34;id&#34;)æ³¨è§£ï¼Œå…¶å®æ˜¯å‚æ•°å
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Select</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select id,name,pwd as password from user where id = #{id}&#34;</span><span style="color:#f92672">)</span>
User <span style="color:#a6e22e">getUserById</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Param</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">);</span>

<span style="color:#a6e22e">@Insert</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;insert into user(id, name ,pwd) values (#{id},#{name},#{password})&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">addUser</span><span style="color:#f92672">(</span>User user<span style="color:#f92672">);</span>

<span style="color:#a6e22e">@Update</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;update user set name=#{name},pwd=#{password} where id=#{id}&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">updateUser</span><span style="color:#f92672">(</span>User user<span style="color:#f92672">);</span>

<span style="color:#a6e22e">@Delete</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;delete from user where id = #{uid}&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">deleteUser</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Param</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;uid&#34;</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">);</span>
</code></pre></div><p>ã€æ³¨æ„ï¼šå¿…é¡»è¦å°†æ¥å£æ³¨å†Œç»‘å®šåˆ°æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ã€‘</p>
<p><strong>å…³äº@Paramæ³¨è§£</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ </li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Š</li>
<li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„ï¼Œå°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„@Param()ä¸­è®¾å®šçš„å±æ€§å</li>
</ul>
<p>#{} å’Œ ${} çš„åŒºåˆ«ï¼Ÿ <br>
ä¸€èˆ¬ç”¨#{}ï¼Œå¯ä»¥é˜²æ­¢SQLæ³¨å…¥ <br>
${} ä¼šè¿›è¡ŒSQLæ‹¼æ¥</p>
<h2 id="lombok">Lombok</h2>
<p>ä¸»è¦ä½œç”¨ï¼šå·æ‡’</p>
<p>ä½¿ç”¨æ–¹æ³•</p>
<ol>
<li>ä¸‹è½½ï¼šFile-&gt;settings-&gt;Plugins-&gt;lombok</li>
<li>å¯¼å…¥lombokä¾èµ–</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;dependency&gt;</span>
    <span style="color:#f92672">&lt;groupId&gt;</span>org.projectlombok<span style="color:#f92672">&lt;/groupId&gt;</span>
    <span style="color:#f92672">&lt;artifactId&gt;</span>lombok<span style="color:#f92672">&lt;/artifactId&gt;</span>
    <span style="color:#f92672">&lt;version&gt;</span>1.18.10<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div><ol start="3">
<li>åœ¨å®ä½“ç±»ä¸ŠåŠ æ³¨è§£</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Data</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String password<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><pre><code>@Getter and @Setter
@FieldNameConstants
@ToString
@EqualsAndHashCode
@AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor
@Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger, @CustomLog
@Data
@Builder
@SuperBuilder
@Singular
@Delegate
@Value
@Accessors
@Wither
@With
@SneakyThrows
@val
@var
experimental @var
@UtilityClass
Lombok config system
Code inspections
Refactoring actions (lombok and delombok)
</code></pre><p>è¯´æ˜ï¼š</p>
<pre><code>@Dataï¼šæ— å‚æ„é€ ï¼Œgetã€setã€toStringã€hashcodeã€equals
@AllArgsConstructor
@NoArgsConstructor
</code></pre><h2 id="å¤šå¯¹ä¸€å¤„ç†">å¤šå¯¹ä¸€å¤„ç†</h2>
<ul>
<li>å¤šä¸ªå­¦ç”Ÿï¼Œå¯¹åº”ä¸€ä¸ªè€å¸ˆ</li>
<li>å¯¹äºå­¦ç”Ÿè¿™è¾¹è€Œè¨€ï¼Œå…³è”ï¼Œå¤šä¸ªå­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆã€å¤šå¯¹ä¸€ã€‘</li>
<li>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œé›†åˆï¼Œä¸€ä¸ªè€å¸ˆæœ‰å¾ˆå¤šå­¦ç”Ÿã€ä¸€å¯¹å¤šã€‘</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> <span style="color:#f92672">`</span>mybatis<span style="color:#f92672">`</span>;

USE <span style="color:#f92672">`</span>mysqtis<span style="color:#f92672">`</span>;

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span>(
  <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
  <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
  <span style="color:#f92672">`</span>pwd<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>
)ENGINE<span style="color:#f92672">=</span>INNODB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span>(<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>pwd<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span>
(<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#39;ä½ å¥½&#39;</span>,<span style="color:#e6db74">&#39;123231&#39;</span>),
(<span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#39;asd&#39;</span>,<span style="color:#e6db74">&#39;adsas&#39;</span>),
(<span style="color:#ae81ff">3</span>,<span style="color:#e6db74">&#39;aaaaa&#39;</span>,<span style="color:#e6db74">&#39;aaasd123&#39;</span>)

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>pwd<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">4</span>,<span style="color:#f92672">`</span><span style="color:#960050;background-color:#1e0010">å¼ ä¸€</span><span style="color:#f92672">`</span>,<span style="color:#e6db74">&#39;123456&#39;</span>),(<span style="color:#ae81ff">5</span>,<span style="color:#f92672">`</span><span style="color:#960050;background-color:#1e0010">å¼ äºŒ</span><span style="color:#f92672">`</span>,<span style="color:#e6db74">&#39;123456&#39;</span>),(<span style="color:#ae81ff">6</span>,<span style="color:#f92672">`</span><span style="color:#960050;background-color:#1e0010">å¼ ä¸‰</span><span style="color:#f92672">`</span>,<span style="color:#e6db74">&#39;123456&#39;</span>);

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>teacher<span style="color:#f92672">`</span>(
 <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
 <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
 <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>(<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>)
)ENGINE<span style="color:#f92672">=</span>INNODB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> teacher(<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>,<span style="color:#f92672">`</span>name<span style="color:#f92672">`</span>) <span style="color:#66d9ef">VALUES</span>(<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#39;æ´›æŸ&#39;</span>);

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>student<span style="color:#f92672">`</span>(
    <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
    <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
    <span style="color:#f92672">`</span>tid<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>(<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>),
    <span style="color:#66d9ef">KEY</span> <span style="color:#f92672">`</span>fktid<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>tid<span style="color:#f92672">`</span>),
    <span style="color:#66d9ef">CONSTRAINT</span> <span style="color:#f92672">`</span>fktid<span style="color:#f92672">`</span> <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#f92672">`</span>tid<span style="color:#f92672">`</span>) <span style="color:#66d9ef">REFERENCES</span> <span style="color:#f92672">`</span>teacher<span style="color:#f92672">`</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>)
)ENGINE<span style="color:#f92672">=</span>INNODB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;

<span style="color:#f92672">`</span>student<span style="color:#f92672">``</span>teacher<span style="color:#f92672">`</span>
</code></pre></div><h3 id="æµ‹è¯•ç¯å¢ƒæ­å»º">æµ‹è¯•ç¯å¢ƒæ­å»º</h3>
<ol>
<li>å¯¼å…¥lombok</li>
<li>æ–°å»ºå®ä½“ç±»Teacherã€Student</li>
<li>å»ºç«‹Mapperæ¥å£</li>
<li>å»ºç«‹Mapper.xmlæ–‡ä»¶</li>
<li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œæˆ‘ä»¬çš„Mapperæ¥å£æˆ–è€…æ–‡ä»¶</li>
<li>æµ‹è¯•</li>
</ol>
<h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†">æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--
</span><span style="color:#75715e">    æ€è·¯ï¼š
</span><span style="color:#75715e">        1. æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯
</span><span style="color:#75715e">        2. æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tidï¼Œå¯»æ‰¾å¯¹åº”çš„è€å¸ˆ
</span><span style="color:#75715e">    --&gt;</span>
<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getStudents&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;StudentTeacher&#34;</span><span style="color:#f92672">&gt;</span>
    select * from student
<span style="color:#f92672">&lt;/select&gt;</span>

<span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;StudentTeacher&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;Student&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#75715e">&lt;!--å¤æ‚çš„æƒ…å†µæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç†
</span><span style="color:#75715e">        å¯¹è±¡ï¼šassociation
</span><span style="color:#75715e">        é›†åˆï¼šcollection
</span><span style="color:#75715e">    --&gt;</span>
    <span style="color:#f92672">&lt;association</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;teacher&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;tid&#34;</span> <span style="color:#a6e22e">javaType=</span><span style="color:#e6db74">&#34;Teacher&#34;</span> <span style="color:#a6e22e">select=</span><span style="color:#e6db74">&#34;getTeacher&#34;</span><span style="color:#f92672">/&gt;</span>

<span style="color:#f92672">&lt;/resultMap&gt;</span>

<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getTeacher&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Teacher&#34;</span><span style="color:#f92672">&gt;</span>
    select * from teacher where id = #{id}
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><h3 id="æŒ‰ç»“æœåµŒå¥—å¤„ç†">æŒ‰ç»“æœåµŒå¥—å¤„ç†</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--&gt;</span>
<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getStudents2&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;StudentTeacher2&#34;</span><span style="color:#f92672">&gt;</span>
    select s.id sid, s.name sname, t.name tname, s.tid stid
    from student s, teacher t
    where s.tid = t.id
<span style="color:#f92672">&lt;/select&gt;</span>

<span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;StudentTeacher2&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;Student&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;sid&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;sname&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;association</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;teacher&#34;</span> <span style="color:#a6e22e">javaType=</span><span style="color:#e6db74">&#34;Teacher&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;stid&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;tname&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/association&gt;</span>
<span style="color:#960050;background-color:#1e0010">&lt;</span>/resultMap
</code></pre></div><p>å›é¡¾Mysqlå¤šå¯¹ä¸€æŸ¥è¯¢æ–¹å¼ï¼š</p>
<ul>
<li>å­æŸ¥è¯¢</li>
<li>è”è¡¨æŸ¥è¯¢</li>
</ul>
<h2 id="ä¸€å¯¹å¤šå¤„ç†">ä¸€å¯¹å¤šå¤„ç†</h2>
<p>æ¯”å¦‚ï¼šä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼<br>
å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Data</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tid<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Data</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Teacher</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Student<span style="color:#f92672">&gt;</span> students<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†">æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--&gt;</span>
<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getTeacher&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;TeacherStudent&#34;</span><span style="color:#f92672">&gt;</span>
    select s.id sid, s.name sname, t.name tname, t.id tid
    from student s, teacher t
    where s.tid = t.id and t.id = #{tid}
<span style="color:#f92672">&lt;/select&gt;</span>
<span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;TeacherStudent&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;Teacher&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;tid&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;tname&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#75715e">&lt;!--å¤æ‚å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç†
</span><span style="color:#75715e">    å¯¹è±¡ï¼šassociation
</span><span style="color:#75715e">    é›†åˆï¼šcollection
</span><span style="color:#75715e">    javaType=â€â€œæŒ‡å®šå±æ€§çš„ç±»å‹
</span><span style="color:#75715e">    é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ofTypeè·å–
</span><span style="color:#75715e">    --&gt;</span>
    <span style="color:#f92672">&lt;collection</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;students&#34;</span> <span style="color:#a6e22e">ofType=</span><span style="color:#e6db74">&#34;Student&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;sid&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;sname&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;tid&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;tid&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/collection&gt;</span>
<span style="color:#f92672">&lt;/resultMap&gt;</span>
</code></pre></div><h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†-1">æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getTeacher2&#34;</span> <span style="color:#a6e22e">resultMap=</span><span style="color:#e6db74">&#34;TeacherStudent2&#34;</span><span style="color:#f92672">&gt;</span>
    select * from teacher where id = #{tid}
<span style="color:#f92672">&lt;/select&gt;</span>
<span style="color:#f92672">&lt;resultMap</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;TeacherStudent2&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;Teacher&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;result</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;collection</span> <span style="color:#a6e22e">property=</span><span style="color:#e6db74">&#34;students&#34;</span> <span style="color:#a6e22e">javaType=</span><span style="color:#e6db74">&#34;ArrayList&#34;</span> <span style="color:#a6e22e">ofType=</span><span style="color:#e6db74">&#34;Student&#34;</span> <span style="color:#a6e22e">column=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">select=</span><span style="color:#e6db74">&#34;getStudentByTeacherId&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/resultMap&gt;</span>

<span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;getStudentByTeacherId&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Student&#34;</span><span style="color:#f92672">&gt;</span>
    select * from student where tid = #{tid}
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><h3 id="å°ç»“">å°ç»“</h3>
<ol>
<li>å…³è”-associationã€å¤šå¯¹ä¸€ã€‘</li>
<li>é›†åˆ-collectionã€ä¸€å¯¹å¤šã€‘</li>
<li>javaType &amp; ofType
<ol>
<li>javaType ç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹</li>
<li>ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„pojoç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹ï¼</li>
</ol>
</li>
</ol>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µåçš„é—®é¢˜</li>
<li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ï¼Œå»ºè®®ä½¿ç”¨Log4j</li>
</ul>
<p>é¢è¯•é«˜é¢‘ï¼š</p>
<ul>
<li>MySqlå¼•æ“</li>
<li>InnoDBåº•å±‚åŸç†</li>
<li>ç´¢å¼•</li>
<li>ç´¢å¼•ä¼˜åŒ–</li>
</ul>
<h2 id="åŠ¨æ€sql">åŠ¨æ€SQL</h2>
<p>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼Ÿ<br>
<strong>åŠ¨æ€SQLå°±æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</strong></p>
<pre><code>if
choose (when, otherwise)
trim (where, set)
foreach
</code></pre><h3 id="æ­å»ºç¯å¢ƒ-1">æ­å»ºç¯å¢ƒ</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>blog<span style="color:#f92672">`</span> (
    <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">50</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;åšå®¢id&#39;</span>,
    <span style="color:#f92672">`</span>title<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;åšå®¢æ ‡é¢˜&#39;</span>,
    <span style="color:#f92672">`</span>author<span style="color:#f92672">`</span> VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;åšå®¢ä½œè€…&#39;</span>,
    <span style="color:#f92672">`</span>create_time<span style="color:#f92672">`</span> DATETIME <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;åˆ›å»ºæ—¶é—´&#39;</span>,
    <span style="color:#f92672">`</span>views<span style="color:#f92672">`</span> INT(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;æµè§ˆé‡&#39;</span>
)ENGINE<span style="color:#f92672">=</span>INNODB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;
</code></pre></div><p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹ï¼š</p>
<ol>
<li>å¯¼åŒ…</li>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
<li>ç¼–å†™å®ä½“ç±»</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#a6e22e">@Data</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Blog</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> id<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String title<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> String author<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Date createTime<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> views<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ol start="4">
<li>ç¼–å†™å®ä½“ç±»å¯¹åº”çš„Mapperæ¥å£å’Œ Mapper.xml</li>
</ol>
<h3 id="if">if</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;queryBolgIf&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Blog&#34;</span><span style="color:#f92672">&gt;</span>
    select * from blog where 1=1
    <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;title !=null&#34;</span><span style="color:#f92672">&gt;</span>
        and title = #{title}
    <span style="color:#f92672">&lt;/if&gt;</span>
    <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;author !=null&#34;</span><span style="color:#f92672">&gt;</span>
        and author = #{author}
    <span style="color:#f92672">&lt;/if&gt;</span>
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><p>æ”¹è¿›åçš„,ç”¨åˆ°äº†whereæ ‡ç­¾</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;queryBolgIf&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Blog&#34;</span><span style="color:#f92672">&gt;</span>
    select * from blog
    <span style="color:#f92672">&lt;where&gt;</span>
        <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;title !=null&#34;</span><span style="color:#f92672">&gt;</span>
            title = #{title}
        <span style="color:#f92672">&lt;/if&gt;</span>
        <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;author !=null&#34;</span><span style="color:#f92672">&gt;</span>
            and author = #{author}
        <span style="color:#f92672">&lt;/if&gt;</span>
    <span style="color:#f92672">&lt;/where&gt;</span>
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><h3 id="choosewhenotherwise">chooseã€whenã€otherwise</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;queryBlogChoose&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;Blog&#34;</span><span style="color:#f92672">&gt;</span>
    select * from blog
    <span style="color:#f92672">&lt;where&gt;</span>
        <span style="color:#f92672">&lt;choose&gt;</span>
            <span style="color:#f92672">&lt;when</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;title != null&#34;</span><span style="color:#f92672">&gt;</span>
                title = #{title}
            <span style="color:#f92672">&lt;/when&gt;</span>
            <span style="color:#f92672">&lt;when</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;author != null&#34;</span><span style="color:#f92672">&gt;</span>
                author = #{author}
            <span style="color:#f92672">&lt;/when&gt;</span>
            <span style="color:#f92672">&lt;otherwise&gt;</span>
                views = #{views}
            <span style="color:#f92672">&lt;/otherwise&gt;</span>
        <span style="color:#f92672">&lt;/choose&gt;</span>
    <span style="color:#f92672">&lt;/where&gt;</span>
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><h3 id="trimwhereset">trimã€whereã€set</h3>
<p>where å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œwhere å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p>
<p>å¦‚æœ where å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ where å…ƒç´ çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå’Œ where å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;trim</span> <span style="color:#a6e22e">prefix=</span><span style="color:#e6db74">&#34;WHERE&#34;</span> <span style="color:#a6e22e">prefixOverrides=</span><span style="color:#e6db74">&#34;AND |OR &#34;</span><span style="color:#f92672">&gt;</span>
  ...
<span style="color:#f92672">&lt;/trim&gt;</span>
</code></pre></div><p>prefixOverrides å±æ€§ä¼šå¿½ç•¥é€šè¿‡ç®¡é“ç¬¦åˆ†éš”çš„æ–‡æœ¬åºåˆ—ï¼ˆæ³¨æ„æ­¤ä¾‹ä¸­çš„ç©ºæ ¼æ˜¯å¿…è¦çš„ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¼šç§»é™¤æ‰€æœ‰ prefixOverrides å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ä¸”æ’å…¥ prefix å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ã€‚</p>
<p>ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš setã€‚set å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚</p>
<p><strong>æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ï¼Œåªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢å»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç </strong></p>
<h3 id="foreach">foreach</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">where</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">and</span> (id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">or</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">or</span> id<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</code></pre></div><p>reach å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;select</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;selectPostIn&#34;</span> <span style="color:#a6e22e">resultType=</span><span style="color:#e6db74">&#34;domain.blog.Post&#34;</span><span style="color:#f92672">&gt;</span>
  SELECT *
  FROM POST P
  WHERE ID in
  <span style="color:#f92672">&lt;foreach</span> <span style="color:#a6e22e">item=</span><span style="color:#e6db74">&#34;item&#34;</span> <span style="color:#a6e22e">index=</span><span style="color:#e6db74">&#34;index&#34;</span> <span style="color:#a6e22e">collection=</span><span style="color:#e6db74">&#34;list&#34;</span> <span style="color:#a6e22e">open=</span><span style="color:#e6db74">&#34;(&#34;</span> <span style="color:#a6e22e">separator=</span><span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#a6e22e">close=</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">&gt;</span>
        #{item}
  <span style="color:#f92672">&lt;/foreach&gt;</span>
<span style="color:#f92672">&lt;/select&gt;</span>
</code></pre></div><p>ä¾‹å­</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">select</span> id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;queryBlogForeach&#34;</span> parameterType<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;map&#34;</span> resultType<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Blog&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> blog
    <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">where</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span>foreach collection<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ids&#34;</span> item<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#66d9ef">open</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(&#34;</span> separator<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;or&#34;</span> <span style="color:#66d9ef">close</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">&gt;</span>
            id <span style="color:#f92672">=</span> <span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">{</span>id<span style="color:#960050;background-color:#1e0010">}</span>
        <span style="color:#f92672">&lt;/</span>foreach<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;/</span><span style="color:#66d9ef">where</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span><span style="color:#66d9ef">select</span><span style="color:#f92672">&gt;</span>

<span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">å‡è®¾</span>idsé‡Œé¢æœ‰ä¸‰ä¸ªå…ƒç´ 1<span style="color:#960050;background-color:#1e0010">ï¼Œ</span><span style="color:#ae81ff">2</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span><span style="color:#ae81ff">4</span>
<span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">å¾—åˆ°çš„</span>sqlä¸º
<span style="color:#f92672">//</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> blog <span style="color:#66d9ef">WHERE</span> ( id <span style="color:#f92672">=</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">or</span> id <span style="color:#f92672">=</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">or</span> id <span style="color:#f92672">=</span> <span style="color:#f92672">?</span> )<span style="color:#960050;background-color:#1e0010">ç„¶åä¼ å…¥</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span><span style="color:#ae81ff">2</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span><span style="color:#ae81ff">4</span>
</code></pre></div><h3 id="sqlç‰‡æ®µ">SQLç‰‡æ®µ</h3>
<p>æœ‰æ—¶å€™ï¼Œå¯èƒ½ä¼šå°†ä¸€äº›å…¬å…±çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œä»¥ä¾¿äºå¤ç”¨</p>
<ol>
<li>ä½¿ç”¨SQLæ ‡ç­¾æŠ½å–å…¬å…±éƒ¨åˆ†</li>
<li>åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨includeæ ‡ç­¾å¼•ç”¨å³å¯</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;sql</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;if-title-author&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;title !=null&#34;</span><span style="color:#f92672">&gt;</span>
        title = #{title},
    <span style="color:#f92672">&lt;/if&gt;</span>
    <span style="color:#f92672">&lt;if</span> <span style="color:#a6e22e">test=</span><span style="color:#e6db74">&#34;author != null&#34;</span><span style="color:#f92672">&gt;</span>
        author = #{author}
    <span style="color:#f92672">&lt;/if&gt;</span>
<span style="color:#f92672">&lt;/sql&gt;</span>

<span style="color:#f92672">&lt;update</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;updateBlog&#34;</span> <span style="color:#a6e22e">parameterType=</span><span style="color:#e6db74">&#34;map&#34;</span><span style="color:#f92672">&gt;</span>
    update blog
    <span style="color:#f92672">&lt;set&gt;</span>
        <span style="color:#f92672">&lt;include</span> <span style="color:#a6e22e">refid=</span><span style="color:#e6db74">&#34;if-title-author&#34;</span><span style="color:#f92672">&gt;&lt;/include&gt;</span>
    <span style="color:#f92672">&lt;/set&gt;</span>
    where id = #{id}
<span style="color:#f92672">&lt;/update&gt;</span>
</code></pre></div><p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰SQLç‰‡æ®µ</li>
<li>ä¸è¦å­˜åœ¨whereæ ‡ç­¾</li>
</ul>
<p>åŠ¨æ€SQLå°±æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥ï¼Œæˆ‘ä»¬åªè¦ä¿è¯SQLçš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§SQLçš„æ ¼å¼ï¼Œå»æ’åˆ—ç»„åˆå°±å¥½äº†</p>
<p>å»ºè®®ï¼š</p>
<ul>
<li>å…ˆåœ¨Mysqlä¸­å†™å‡ºå®Œæ•´çš„SQLï¼Œå†å¯¹åº”åœ°å»ä¿®æ”¹æˆåŠ¨æ€SQLå®ç°é€šç”¨çš„SQL</li>
</ul>
<h2 id="ç¼“å­˜">ç¼“å­˜</h2>
<h3 id="ç®€ä»‹-1">ç®€ä»‹</h3>
<pre><code>æŸ¥è¯¢ï¼šè¿æ¥æ•°æ®åº“ï¼Œè€—è´¹èµ„æº
ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœï¼Œç»™ä»–æš‚å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹--&gt;å†…å­˜ï¼šç¼“å­˜

æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢ç›¸åŒæ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥èµ°ç¼“å­˜ï¼Œå°±ä¸ç”¨èµ°æ•°æ®åº“äº†
</code></pre><ol>
<li>ä»€ä¹ˆæ˜¯ç¼“å­˜ã€Cacheã€‘ï¼Ÿ
<ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜(å†…å­˜)ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ
<ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡</li>
</ul>
</li>
<li>æ˜¯ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ
<ul>
<li>ç»å¸¸æŸ¥è¯¢ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®</li>
</ul>
</li>
</ol>
<h3 id="mybatisç¼“å­˜">MyBatisç¼“å­˜</h3>
<ul>
<li>MyBatisåŒ…å«äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œä»–å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§åœ°æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿæˆä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜</li>
<li>ä¸ºäº†æé«˜æ‹“å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥å®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<h3 id="ä¸€çº§ç¼“å­˜">ä¸€çº§ç¼“å­˜</h3>
<ul>
<li>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼šSqlSession
<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…è¦å†å»æŸ¥è¯¢æ•°æ®åº“</li>
</ul>
</li>
</ul>
<p>æµ‹è¯•æ­¥éª¤ï¼š</p>
<ol>
<li>å¼€å¯æ—¥å¿—</li>
<li>æµ‹è¯•ä¸€ä¸ªSessionä¸­æŸ¥è¯¢ä¸¤æ¬¡ç›¸åŒè®°å½•</li>
<li>æŸ¥çœ‹æ—¥å¿—è¾“å‡º</li>
</ol>
<p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p>
<ol>
<li>æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿</li>
<li>å¢åˆ æ”¹æ“ä½œï¼ˆåªè¦æ“ä½œäº†å°±ä¼šï¼‰ï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å¿…å®šä¼šåˆ·æ–°ç¼“å­˜</li>
<li>æŸ¥è¯¢ä¸åŒçš„Mapper.xml</li>
<li>æ‰‹åŠ¨æ¸…ç†ç¼“å­˜</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">clearCache</span><span style="color:#f92672">();</span>
</code></pre></div><p>å°ç»“ï¼šä¸€çº§ç¼“å­˜æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œåªåœ¨ä¸€æ¬¡SqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ°è¿æ¥ä¸€ç›´åˆ°å…³é—­è¿æ¥è¿™ä¸€æ®µæ—¶é—´å†…</p>
<p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªMap</p>
<h3 id="äºŒçº§ç¼“å­˜">äºŒçº§ç¼“å­˜</h3>
<ul>
<li>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</li>
<li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜</li>
<li>å·¥ä½œæœºåˆ¶
<ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹</li>
<li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜(map)ä¸­</li>
</ul>
</li>
</ul>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>å¼€å¯å…¨å±€ç¼“å­˜</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;settings&gt;</span>
    <span style="color:#75715e">&lt;!--æ˜¾å¼åœ°å¼€å¯å…¨å±€ç¼“å­˜--&gt;</span>
    <span style="color:#f92672">&lt;setting</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;cacheEnabled&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/settings&gt;</span>
</code></pre></div><ol start="2">
<li>åœ¨è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„Mapperä¸­å¼€å¯</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span> 
<span style="color:#f92672">&lt;cache/&gt;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‚æ•°</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span> 
<span style="color:#f92672">&lt;cache</span>  <span style="color:#a6e22e">eviction=</span><span style="color:#e6db74">&#34;FIFO&#34;</span>
        <span style="color:#a6e22e">flushInterval=</span><span style="color:#e6db74">&#34;60000&#34;</span>
        <span style="color:#a6e22e">size=</span><span style="color:#e6db74">&#34;512&#34;</span>
        <span style="color:#a6e22e">readOnly=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><ol start="3">
<li>æµ‹è¯•</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span><span style="color:#f92672">(){</span>
    SqlSession sqlSession <span style="color:#f92672">=</span> MybatisUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">();</span>
    SqlSession sqlSession2 <span style="color:#f92672">=</span> MybatisUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getSqlSession</span><span style="color:#f92672">();</span>

    UserMapper mapper <span style="color:#f92672">=</span> sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">getMapper</span><span style="color:#f92672">(</span>UserMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
    UserMapper mapper2 <span style="color:#f92672">=</span> sqlSession2<span style="color:#f92672">.</span><span style="color:#a6e22e">getMapper</span><span style="color:#f92672">(</span>UserMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>

    User user <span style="color:#f92672">=</span> mapper<span style="color:#f92672">.</span><span style="color:#a6e22e">queryUserById</span><span style="color:#f92672">(</span>7<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
    <span style="color:#75715e">// è¦å…ˆå…³é—­ç¬¬ä¸€ä¸ªsqlSession
</span><span style="color:#75715e"></span>    sqlSession<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>


    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;================================&#34;</span><span style="color:#f92672">);</span>

    User user2 <span style="color:#f92672">=</span> mapper2<span style="color:#f92672">.</span><span style="color:#a6e22e">queryUserById</span><span style="color:#f92672">(</span>7<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user2<span style="color:#f92672">);</span>
    sqlSession2<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><ol>
<li>é—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦å°†å®ä¹ ç±»åºåˆ—åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
</ol>
<p>å°ç»“ï¼š</p>
<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆ</li>
<li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li>åªæœ‰å½“ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
</ul>
<h3 id="ç¼“å­˜åŸç†">ç¼“å­˜åŸç†</h3>
<p>ç¼“å­˜é¡ºåº</p>
<ol>
<li>å…ˆçœ‹äºŒçº§ç¼“å­˜ä¸­æœ‰æ²¡æœ‰</li>
<li>å†çœ‹ä¸€çº§ç¼“å­˜ä¸­æœ‰æ²¡æœ‰</li>
<li>æŸ¥è¯¢æ•°æ®åº“</li>
</ol>
<h3 id="è‡ªå®šä¹‰ç¼“å­˜-ehcache">è‡ªå®šä¹‰ç¼“å­˜-Ehcache</h3>
<pre><code>Ehcache æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜,Java EEå’Œè½»é‡çº§å®¹å™¨
</code></pre>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
